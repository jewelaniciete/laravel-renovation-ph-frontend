//prof-profile
<script setup>
import { ref, onMounted } from 'vue';

definePageMeta({
    layout: 'template-default'
})

const client = ref({});
const profile = ref({});

onMounted(async () => {
    await clientView();
    await profileView();
});

function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) {
        const cookie = parts.pop()?.split(';').shift();
        return cookie ? decodeURIComponent(cookie) : null;
    }
    return null;
}

async function clientView() {
    const accessToken = getCookie('access_token');
    if (!accessToken) {
        console.log('Access token is missing');
        return;
    }
    const response = await fetch(`http://localhost:8000/api/professionals/view`, {
        method: 'GET',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${accessToken}`
        },
    });

    if (response.ok) {
        const data = await response.json();
        client.value = data.data;
        console.log(client.value);
    } else {
        console.error('Failed to fetch client data:', response.statusText);
    }
}

async function profileView() {
    const accessToken = getCookie('access_token');
    if (!accessToken) {
        console.log('Access token is missing');
        return;
    }
    const response = await fetch(`http://localhost:8000/api/professionals/profile-view`, {
        method: 'GET',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${accessToken}`
        },
    });
    if (response.ok) {
        const data = await response.json();
        profile.value = data.data;
        console.log(profile.value);
    } else {
        console.error('Failed to fetch client data:', response.statusText);
    }
}

</script>

<template>
    <div class="main-content">
        <div class="page-content">
            
            <!-- Start grid -->
                <section class="relative py-12">
                    <div class="container mx-auto">
                        <div class="grid grid-cols-12 mt-8 md:gap-12">
                            <div class="col-span-12 lg:col-span-12">
                                <div class="rounded-md">
                                    <div>
                                        <div class="">
                                            <div class=""> 
                                                <div class="relative h-60 cover">
                                                    <img src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NzEyNjZ8MHwxfHNlYXJjaHw5fHxjb3ZlcnxlbnwwfDB8fHwxNzEwNzQxNzY0fDA&ixlib=rb-4.0.3&q=80&w=1080" alt="User Cover"
                                                        class="object-cover w-full h-full rounded-t-lg" />
                                                    <div class="absolute inset-0 opacity-50 bg-gradient-to-t from-gray-900"></div>
                                                </div> 
                                                
                                                <div class="flex flex-row w-full">
                                                    <div class="relative flex flex-cols items-end justify-start mt-6 w-full gap-3">
                                                        <div class="flex items-start justify-start">
                                                            <img id="profile-img" :src="profile.profile_route" alt="" class="w-48 h-48">
                                                        </div>
                                                        <div class="mt-3 flex flex-col">
                                                            <h6 class="text-2xl font-bold text-gray-900 dark:text-gray-50"> {{ client.first_name }} {{ client.last_name }} </h6>
                                                            <p class="mt-1 text-gray-500 dark:text-gray-300">{{ client.user_name }}</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex justify-end w-full p-5 items-right">
                                                        <a href="https://www.youtube.com/watch?v=eRYZVkxHBls"><img src="assets/images/logo/editt.svg" alt="" class="w-6 h-6" ></a>
                                                    </div>
                                                </div>

                                                <div class="mt-10 flex flex-row w-full gap-3">
                                                    <div class="flex items-center justify-center">
                                                        <button class="flex items-center gap-2 border border-gray-300 rounded-lg shadow-md px-6 py-2 text-sm font-bold text-green-900 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">                       
                                                            <img src="assets/images/renovation/star.svg" alt="" class="w-6 h-6">
                                                            <span class="">Get Vouch</span>
                                                        </button>
                                                    </div>
                                                    <div class="flex items-center justify-center">
                                                        <button class="flex items-center gap-2 border border-gray-300 rounded-lg shadow-md px-6 py-2 text-sm font-bold text-green-900 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">                       
                                                            <img src="assets/images/renovation/share.svg" alt="" class="w-6 h-6">
                                                            <span class="">Share</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <hr class="mt-3 border-gray-200">
                                                <div class="mt-10 flex flex-row w-full gap-3">
                                                    <div class="w-full flex items-start justify-start text-2xl font-semibold">
                                                        <p class="w-full">0 projects</p>
                                                        <div class="flex justify-end w-full items-right">
                                                            <a href="https://www.youtube.com/watch?v=eRYZVkxHBls"><img src="assets/images/logo/editt.svg" alt="" class="border p-1 w-8 h-8" ></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <section class="py-16">
                                                    <div class="container mx-auto">
                                                        <div class="grid grid-cols-12 md:gap-12 gap-y-8 md:gap-y-0">
                                                            <div class="col-span-12 lg:col-span-12">
                                                                <div class="grid grid-cols-12 md:gap-5">
                                                                    <div class="col-span-12 lg:col-span-4">
                                                                        <div class="h-72 flex flex-col items-center justify-center bg-gray-400 p-2 transition-all duration-500 border-2 border-dashed hover:bg-gray-500 hover:underline rounded-md dark:bg-transparent dark:shadow-none">
                                                                            <div>
                                                                                <div class="w-auto mt-6 text-center h-80">
                                                                                    <NuxtLink to="/projectForm" class="flex flex-col items-center justify-center p-10">
                                                                                        <img src="assets/images/renovation/add.svg" alt="" class="w-16 h-16">
                                                                                        <p class="font-semibold text-gray-900 text-3xl">New Project</p>
                                                                                    </NuxtLink>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-span-12 lg:col-span-4">
                                                                        <div class="p-2 transition-all duration-500 bg-white rounded-md shadow-md dark:bg-transparent dark:shadow-none">
                                                                            <img src="assets/images/blog/img-05.jpg" alt="" class="img-fluid">
                                                                            <div class="p-5">
                                                                                <ul class="flex justify-between mb-3 list-inline">
                                                                                    <li>
                                                                                        <p class="mb-0 text-gray-500 dark:text-gray-300"><a href="blog-author.html" class="font-semibold text-muted">Kiera Finchr</a> - July 23, 2021</p>
                                                                                    </li>
                                                                                    <li>
                                                                                        <p class="mb-0 text-gray-500 dark:text-gray-300"><i class="mdi mdi-eye"></i> 247</p>
                                                                                    </li>
                                                                                </ul>
                                                                                <a href="blog-details.html" class="primary-link"><h6 class="text-gray-900 transition-all duration-300 text-17 dark:text-white group-data-[theme-color=violet]:hover:text-violet-500 group-data-[theme-color=sky]:hover:text-sky-500 group-data-[theme-color=red]:hover:text-red-500 group-data-[theme-color=green]:hover:text-green-500 group-data-[theme-color=pink]:hover:text-pink-500 group-data-[theme-color=blue]:hover:text-blue-500">How To Increase Trade Show Traffic</h6></a>
                                                                                <p class="mt-2 text-gray-500 dark:text-gray-300">Intrinsically incubate intuitive opportunities and real-time potentialities Appropriately communicate one-to-one technology.</p>
                                                                                <div class="mt-4 font-medium group-data-[theme-color=violet]:text-violet-500 group-data-[theme-color=sky]:text-sky-500 group-data-[theme-color=red]:text-red-500 group-data-[theme-color=green]:text-green-500 group-data-[theme-color=pink]:text-pink-500 group-data-[theme-color=blue]:text-blue-500">
                                                                                    <a href="blog-details.html" class="form-text ">Read More <i class="uil uil-angle-right-b"></i></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-span-12 lg:col-span-4">
                                                                        <div class="p-2 transition-all duration-500 bg-white rounded-md shadow-md dark:bg-transparent dark:shadow-none">
                                                                            <img src="assets/images/blog/img-06.jpg" alt="" class="img-fluid">
                                                                            <div class="p-5">
                                                                                <ul class="flex justify-between mb-3 list-inline">
                                                                                    <li>
                                                                                        <p class="mb-0 text-gray-500 dark:text-gray-300"><a href="blog-author.html" class="font-semibold text-muted">Toby Lees</a> - July 11, 2021</p>
                                                                                    </li>
                                                                                    <li>
                                                                                        <p class="mb-0 text-gray-500 dark:text-gray-300"><i class="mdi mdi-eye"></i> 188</p>
                                                                                    </li>
                                                                                </ul>
                                                                                <a href="blog-details.html" class="primary-link"><h6 class="text-gray-900 transition-all duration-300 text-17 dark:text-white group-data-[theme-color=violet]:hover:text-violet-500 group-data-[theme-color=sky]:hover:text-sky-500 group-data-[theme-color=red]:hover:text-red-500 group-data-[theme-color=green]:hover:text-green-500 group-data-[theme-color=pink]:hover:text-pink-500 group-data-[theme-color=blue]:hover:text-blue-500">How apps is changing the IT world</h6></a>
                                                                                <p class="mt-2 text-gray-500 dark:text-gray-300">Intrinsically incubate intuitive opportunities and real-time potentialities Appropriately communicate one-to-one technology.</p>
                                                                                <div class="mt-4 font-medium group-data-[theme-color=violet]:text-violet-500 group-data-[theme-color=sky]:text-sky-500 group-data-[theme-color=red]:text-red-500 group-data-[theme-color=green]:text-green-500 group-data-[theme-color=pink]:text-pink-500 group-data-[theme-color=blue]:text-blue-500">
                                                                                    <a href="blog-details.html" class="form-text ">Read More <i class="uil uil-angle-right-b"></i></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </div>   
                                        </div>
                                    </div>
                                </div>
                            </div>              
                        </div>
                    </div>
                </section>
            <!-- End grid -->
        </div>
    </div>
</template>


//client-profile
<script setup>
import { ref, onMounted } from 'vue';

definePageMeta({
    layout: 'template-default'
})

const client = ref({});
const profile = ref({});

onMounted(async () => {
    await clientView();
    await profileView();
});

function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) {
        const cookie = parts.pop()?.split(';').shift();
        return cookie ? decodeURIComponent(cookie) : null;
    }
    return null;
}

async function clientView() {
    const accessToken = getCookie('access_token');
    if (!accessToken) {
        console.log('Access token is missing');
        return;
    }
    const response = await fetch(`http://localhost:8000/api/clients/view`, {
        method: 'GET',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${accessToken}`
        },
    });

    if (response.ok) {
        const data = await response.json();
        client.value = data.data;
        console.log(client.value);
    } else {
        console.error('Failed to fetch client data:', response.statusText);
    }
}

async function profileView() {
    const accessToken = getCookie('access_token');
    if (!accessToken) {
        console.log('Access token is missing');
        return;
    }
    const response = await fetch(`http://localhost:8000/api/clients/profile-view`, {
        method: 'GET',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${accessToken}`
        },
    });
    if (response.ok) {
        const data = await response.json();
        profile.value = data.data;
        console.log(profile.value);
    } else {
        console.error('Failed to fetch client data:', response.statusText);
    }
}


</script>

<template>
    <div class="main-content">
        <div class="page-content">

            <!-- Start grid -->
            <section class="relative py-16">
                <div class="container mx-auto">
                    <div class="grid grid-cols-12 mt-8 md:gap-12">
                        <div class="col-span-12 lg:col-span-12">
                            <div class="rounded-md">
                                <div>
                                    <div class="">
                                        <div class="mb-10">
                                            <div class="h-60 abosulte cover">
                                                <img src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NzEyNjZ8MHwxfHNlYXJjaHw5fHxjb3ZlcnxlbnwwfDB8fHwxNzEwNzQxNzY0fDA&ixlib=rb-4.0.3&q=80&w=1080"
                                                    alt="User Cover" class="object-cover w-full h-full rounded-t-lg" />
                                            </div>
                                            <div class="flex flex-row w-full">
                                                <div
                                                    class="relative flex-col items-start justify-start mt-custom ml-custom">
                                                    <div class="flex items-start justify-start">
                                                        <img :src="profile.profile_route" alt=""
                                                            class="w-48 h-48 rounded-full border-4">
                                                    </div>

                                                    <div class="mt-3">
                                                        <h6 class="text-2xl font-bold text-gray-900 dark:text-gray-50">
                                                            {{ client.first_name }} {{ client.last_name }}</h6>
                                                        <p class="mt-1 text-gray-500 dark:text-gray-300">
                                                            {{ client.about_me }}</p>
                                                    </div>
                                                </div>
                                                <div class="flex justify-end w-full p-5 items-right">
                                                    <NuxtLink to="/client-edit"> <img src="assets/images/logo/editt.svg"
                                                            alt="" class="w-6 h-6"> </NuxtLink>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-span-12 lg:col-span-5">
                            <div class="p-5 rounded-md bg-gray-50 dark:bg-neutral-700">
                                <div>
                                    <div class="mb-8">
                                        <h5 class="p-2 mb-5 text-gray-900 text-16">Social Media</h5>
                                        <ul class="flex justify-start gap-3 mb-0">
                                            <li
                                                class="w-10 h-10 leading-8 text-center duration-300 rounded-full hover:bg-violet-500 hover:text-white hover:transition-all dark:text-white">
                                                <a href="javascript:void(0)"><i class="uil uil-facebook-f"></i></a>
                                            </li>
                                            <li
                                                class="w-10 h-10 leading-8 text-center duration-300 rounded-full hover:bg-violet-500 hover:text-white hover:transition-all dark:text-white">
                                                <a href="javascript:void(0)"><i class="uil uil-whatsapp"></i></a>
                                            </li>
                                            <li
                                                class="w-10 h-10 leading-8 text-center duration-300 rounded-full hover:bg-violet-500 hover:text-white hover:transition-all dark:text-white">
                                                <a href="javascript:void(0)"><i class="uil uil-twitter-alt"></i></a>
                                            </li>
                                            <li
                                                class="w-10 h-10 leading-8 text-center duration-300 rounded-full hover:bg-violet-500 hover:text-white hover:transition-all dark:text-white">
                                                <a href="javascript:void(0)"><i class="uil uil-dribbble"></i></a>
                                            </li>
                                            <li
                                                class="w-10 h-10 leading-8 text-center duration-300 rounded-full hover:bg-violet-500 hover:text-white hover:transition-all dark:text-white">
                                                <a href="javascript:void(0)"><i class="uil uil-envelope"></i></a>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="mb-8">
                                        <h5 class="p-2 mb-5 text-gray-900 text-16">Photos</h5>
                                        <div class="grid grid-cols-12 gap-3">
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-01.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-01.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-02.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-02.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-03.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-03.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-04.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-04.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-05.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-05.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-06.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-06.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-07.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-07.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-08.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-08.jpg" alt="" class=""></a>
                                            </div>
                                            <div class="col-span-4 md:col-span-6 lg:col-span-4">
                                                <a href="assets/images/blog/img-10.jpg" class="image-popup"><img
                                                        src="assets/images/blog/img-10.jpg" alt="" class=""></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-span-12 lg:col-span-7">
                            <div>
                                <div class="mt-24">
                                    <link rel="stylesheet"
                                        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

                                    <div class="flex flex-row items-center justify-center gap-2">
                                        <img :src="profile.profile_route" alt="User profile"
                                            class="w-12 h-12 rounded-full" />
                                        <button @click.prevent="showModal = true"
                                            class="w-full h-10 text-left truncate border border-gray-400 hover:bg-gray-50 bg-white rounded-full resize-none xs:text-sm sm:text-lg dark:bg-gray-700 dark:text-white dark:border-gray-500 p-2 text-gray-500">
                                            Start a post, try writing with AI
                                        </button>
                                    </div>
                                    <!--post modal-->
                                    <div v-if="showModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60">
    <div class="relative w-100 h-auto bg-white rounded-lg shadow-xl dark:bg-neutral-800">
      <div class="flex justify-between items-center bg-gray-200 rounded-t-md p-4 border-b dark:border-gray-700">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Create Post</h3>
        <button @click="showModal = false" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white" aria-label="Close">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fill-rule="evenodd"
                                                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                            clip-rule="evenodd"></path>
                                                    </svg>
        </button>
      </div>
      <div class="px-6 space-y-6">
        <textarea type="text" class="w-full p-2 rounded-md resize-none overflow-hidden border-none text-2xl dark:bg-neutral-700 text-black dark:text-white h-10 dark:border-gray-600 focus:ring-0" placeholder="add a title"></textarea>
      </div>
      <div class="px-6 py-2 space-y-6">
        <textarea type="text" class="w-full p-2 rounded-md resize-none border-none text-2xl dark:bg-neutral-700 text-black dark:text-white h-50 dark:border-gray-600 focus:ring-0" placeholder="What's on your mind?"></textarea>
      </div>
      <div class="px-6 py-2">
        <div v-if="imageSrcs.length" class="flex space-x-2">
          <div v-for="(src, index) in imageSrcs" :key="index">
            <img :src="src" alt="Image Preview" class="w-40 h-40 rounded-md mb-4">
          </div>
        </div>
      </div>
      <div class="p-3">
        <div class="flex resize-none rounded-md border p-2 justify-between text-black dark:border-gray-600 dark:bg-neutral-700 dark:text-white">
          <p class="select-none text-lg">Add to your post</p>
          <div>
            <img id="uploadImage" class="w-26 cursor-pointer" src="assets/images/gallery.svg" @click="triggerFileInput" />
            <input type="file" ref="fileInput" @change="previewImage" style="display:none;" multiple />
          </div>
        </div>
      </div>
      <div class="flex items-center justify-center p-4 border-t dark:border-gray-700">
        <button @click="showModal = false" class="px-4 py-2 text-black bg-gray-200 w-full rounded-md hover:bg-gray-500">Post</button>
      </div>
    </div>
  </div>
                                    <!--End of modal-->

                                    <div class="flex justify-between mt-2 sm:px-4">
                                        <div
                                            class="flex items-center gap-2 p-2 rounded-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <span class="text-blue-400 material-symbols-outlined">panorama</span>
                                            <h3 class="text-sm font-semibold text-gray-600 dark:text-gray-300">Media
                                            </h3>
                                        </div>

                                        <div
                                            class="flex items-center gap-2 p-2 rounded-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <span
                                                class="text-yellow-700 material-symbols-outlined">calendar_month</span>
                                            <h3 class="text-sm font-semibold text-gray-600 dark:text-gray-300">Event
                                            </h3>
                                        </div>

                                        <div
                                            class="flex items-center gap-2 rounded-sm cursor-pointer sm:p-2 xs:p-1 hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <span class="text-orange-400 material-symbols-outlined">newsmode</span>
                                            <h3
                                                class="text-sm text-gray-600 sm:font-semibold xs:truncate dark:text-gray-300">
                                                Write article</h3>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-14">
                                    <div class="flex flex-row items-start justify-start gap-2">
                                        <img :src="profile.profile_route" alt="User profile"
                                            class="w-12 h-12 rounded-full" />
                                        <div>
                                            <a href="blog-details.html">
                                                <h5
                                                    class="mb-1 text-center text-[18.75px] text-gray-900 dark:text-gray-50">
                                                    {{ client.first_name }} {{ client.last_name }}</h5>
                                            </a>
                                            <p class="text-gray-500 dark:text-gray-300">Sep 06, 2021</p>
                                        </div>
                                    </div>
                                    <p class="mt-10 mb-4 text-gray-500 dark:text-gray-300">Whether article spirits new
                                        her covered hastily sitting her. Money witty books nor son add. Chicken age had
                                        evening believe but proceed pretend mrs. At missed advice my it no sister. Miss
                                        told ham dull knew see she spot near can. Spirit her entire her called.</p>
                                    <div class="mt-5 mb-5">
                                        <a href="blog-details.html"><img src="assets/images/blog/img-12.jpg" alt=""
                                                class="rounded-md"></a>
                                    </div>
                                    <div class="flex justify-between mt-2 sm:px-4">
                                        <div
                                            class="flex items-center gap-2 p-2 rounded-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <span class="text-blue-400 material-symbols-outlined">panorama</span>
                                            <h3 class="text-sm font-semibold text-gray-600 dark:text-gray-300">Media
                                            </h3>
                                        </div>

                                        <div
                                            class="flex items-center gap-2 p-2 rounded-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <span
                                                class="text-yellow-700 material-symbols-outlined">calendar_month</span>
                                            <h3 class="text-sm font-semibold text-gray-600 dark:text-gray-300">Event
                                            </h3>
                                        </div>

                                        <div
                                            class="flex items-center gap-2 rounded-sm cursor-pointer sm:p-2 xs:p-1 hover:bg-gray-100 dark:hover:bg-gray-700">
                                            <span class="text-orange-400 material-symbols-outlined">newsmode</span>
                                            <h3
                                                class="text-sm text-gray-600 sm:font-semibold xs:truncate dark:text-gray-300">
                                                Write article</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>
            <!-- End grid -->
        </div>
    </div>
</template>

<style scoped>

</style>


<script>
export default {
  data() {
    return {
      showModal: false,
      imageSrcs: [] // changed from imageSrc to imageSrcs to handle multiple images
    };
  },
  methods: {
    triggerFileInput() {
      this.$refs.fileInput.click();
    },
    previewImage(event) {
      const files = event.target.files;
      this.imageSrcs = [];
      Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = (e) => {
          this.imageSrcs.push(e.target.result);
        };
        reader.readAsDataURL(file);
      });
    }
  }
};
</script>

//working projectForm

<script setup>
import { ref, onMounted } from 'vue';
import Toastify from 'toastify-js';
import "toastify-js/src/toastify.css";

definePageMeta({
  layout: 'template-default'
})

/* project upload endpoint */
const files = ref([]);  // Initialize as an array to handle multiple files
const formData = ref({
  name: '',
  cost: '',
  start_date: '',
  end_date: '',
});

function onChangeFile(event) {
  files.value = Array.from(event.target.files);
  console.log(files.value);
}

function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) {
    const cookie = parts.pop()?.split(';').shift();
    return cookie ? decodeURIComponent(cookie) : null;
  }
  return null;
}

async function uploadProject() {
  const accessToken = getCookie('access_token');
  const userType = getCookie('user-type');

  if (!accessToken) {
    console.error('Access token is missing');
    return;
  }

  if (!userType) {
    console.error('User type is missing');
    return;
  }

  if (files.value.length === 0) {
    console.log('Files are not selected');
    return;
  }

  const body = new FormData();
  files.value.forEach(file => {
    body.append('file[]', file);  // Append each file to the form data
  });
  body.append('name', formData.value.name);
  body.append('cost', formData.value.cost);
  body.append('start_date', formData.value.start_date);
  body.append('end_date', formData.value.end_date);

  try {
    const response = await fetch(`http://localhost:8000/api/professionals/project-store`, {
      method: 'POST',
      body: body,
      headers: {
        'Accept': 'application/json',
        'Authorization': `Bearer ${accessToken}`
      },
    });

    if (response.ok) {
      Toastify({
        text: `${userType.charAt(0).toUpperCase() + userType.slice(1)} Project Posted!`,
        duration: 3000, // duration in milliseconds
        gravity: "top", // `top` or `bottom`
        position: "right", // `left`, `center` or `right`
        background: "#4caf50", // green
      }).showToast();
    } else {
      console.error(`Failed to upload project of ${userType} data:`, response.statusText);

      Toastify({
        text: `Failed to upload project of ${userType} data: ${response.statusText}`,
        duration: 3000,
        gravity: "top",
        position: "right",
        background: "#f44336", // red
      }).showToast();
    }
  } catch (err) {
    console.error(`Error during uploading project:`, err);

    Toastify({
      text: `Error during uploading project: ${err.message}`,
      duration: 3000,
      gravity: "top",
      position: "right",
      background: "#f44336", // red
    }).showToast();
  }
}
</script>

<template>
  <div class="main-content bg-gray-400">
    <div class="page-content">
      <section class="relative py-20">
        <div class="container mx-auto">
          <div class="grid grid-cols-2">
            <div class=" w-70 mx-auto bg-white p-6">
              <form @submit.prevent="uploadProject">
    <p class="text-4xl px-3 text-gray-500">Upload a project</p><br>
    <p class="text-gray-400 px-3">A project is a compilation of images of your own creations. </p>
    <div class="grid grid-cols-2">
      <div class="p-3">
        <label class="text-xl text-gray-500">Project Title</label><br>
        <input type="text" v-model="formData.name" placeholder="Project Title"
          class="text-black placeholder:text-gray-100" />
      </div>
      <div class="p-3">
        <label class="text-xl text-gray-500">Cost</label><br>
        <input type="number" placeholder="Add Cost" v-model="formData.cost"
          class="text-black placeholder:text-gray-100" />
      </div>
    </div>
    <div class="grid grid-cols-2">
      <div class="p-3">
        <label class="text-gray-500">Start of project</label><br />
        <input v-model="formData.start_date" type="date" class="text-black" />
      </div>
      <div class="p-3">
        <label class="text-gray-500">End of project</label><br />
        <input v-model="formData.end_date" type="date" class="text-black" />
      </div>
    </div>

    <!-- Input Image -->
    <div class="flex items-center justify-center w-full py-6">
      <label for="dropzone-file"
        class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600">
        <div class="flex flex-col items-center justify-center pt-5 pb-6">
          <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
          </svg>
          <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to
              upload </span> or drag and drop</p>
          <p class="text-xs text-gray-500 dark:text-gray-400">PNG, or JPG (MAX. 100MB)</p>
        </div>
        <input id="dropzone-file" type="file" class="hidden" multiple accept=".png, .jpg" @change="onChangeFile" />
      </label>
    </div>
    <div>
      <button type="submit" class="bg-gray-500 p-3 px-4 float-right rounded-md">
        Post
      </button>
    </div>
  </form>
            </div>

            <div class="w-30 h-60 mx-auto bg-white p-6 text-black">

              <p class="text-2xl font-semibold">Photo Guidelines</p>
              <p>Photos that do not meet these guidelines will be removed.</p>

              <label class="text-green-500">Do's</label>
              <div class="flex gap-6">
                <img src="/assets/images/renovation/dos.svg" />

                <ul class="list-disc text-xs">
                  <li>Photos of residential spaces</li>
                  <li>Large Photos (1000 pixels wide or more)</li>
                  <li>SGV, PNG or JPG is accepted</li>
                  <li>Good Quality Photos</li>
                  <li>Max 100MB</li>
                </ul>
              </div>
              <label class="text-red-500">Don'ts</label>
              <div class="flex gap-6">
                <img src="/assets/images/renovation/donts.svg" />
                <ul class="list-disc text-xs">
                  <li>Photos of commercial or office spaces Small Photos PDF</li>
                  <li>Multi-Page TIFF or EPS file formats</li>
                  <li>Low Quality Photos</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>


</template>



<style></style>
<!-- 
<script>
export default {
  data() {
    return {
      files: [],  // Array to hold File objects
    };
  },
  methods: {
    onChangeFile(event) {
      const fileList = event.target.files;
      this.files = Array.from(fileList);
    },
    async uploadProjects() {
      const fileArray = await Promise.all(
        this.files.map(file => this.readFileAsArrayBuffer(file))
      );

      console.log('File Arrays:', fileArray);

      this.files = [];
    },
    readFileAsArrayBuffer(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => {
          resolve(new Uint8Array(e.target.result));
        };
        reader.onerror = (e) => {
          reject(e);
        };
        reader.readAsArrayBuffer(file);
      });
    }
  }
};
</script> -->
